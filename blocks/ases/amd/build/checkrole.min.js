requirejs(["jquery"],function(a){function b(a){for(var b=[],c=document.location.search.substring(1),d=c.split("&"),e=0;e<d.length;e++){var f=d[e].split("=");b[f[0]]=f[1]}return b}function c(b){a.ajax({type:"POST",data:{page:"ficha",block:b.instanceid},url:"../managers/checkrole.php",success:function(a){var c=a.error;if(c){a.msg;swal({allowEscapeKey:!1,title:"AREA RESTRINGIDA",html:!0,type:"error",text:c,confirmButtonColor:"#d51b23"},function(a){a?window.history.back():swal("Cancelled","Your imaginary file is safe :)","error")})}else for(x in a){var d=a[x].funid,e=a[x].permiso;switch(parseInt(d)){case 3:h(e,b);break;case 4:i(e);break;case 5:j(e);break;case 6:k(e);break;case 7:m(e,b);break;case 10:l(e,b),console.log("entro");break;default:console.log("Error al consultar permiso "+d)}}},dataType:"json",cache:"false",error:function(a){alert("Error "+a)}})}function d(b){a.ajax({type:"POST",data:{page:"index",block:b.instanceid},url:"../managers/checkrole.php",success:function(b){var c=b.error;if(c){b.msg;swal({allowEscapeKey:!1,title:"AREA RESTRINGIDA",html:!0,type:"error",text:c,confirmButtonColor:"#d51b23"},function(a){a?window.history.back():swal("Cancelled","Your imaginary file is safe :)","error")})}else for(x in b){var d=(b[x].funid,b[x].permiso);switch(d){case"C":break;case"R":a("#btn-send-indexform").prop("disabled",!1);break;case"U":break;case"D":}}},dataType:"json",cache:"false",error:function(a){console.log(a)}})}function e(b){a.ajax({type:"POST",data:{page:"v_seguimiento_pilos",block:b.instanceid},url:"../managers/checkrole.php",success:function(a){var b=a.error;if(b){a.msg;swal({allowEscapeKey:!1,title:"AREA RESTRINGIDA",html:!0,type:"error",text:b,confirmButtonColor:"#d51b23"},function(a){a?window.history.back():swal("Cancelled","Your imaginary file is safe :)","error")})}else for(x in a){var c=(a[x].funid,a[x].permiso);switch(c){case"C":break;case"R":break;case"U":break;case"D":}}},dataType:"json",cache:"false",error:function(a){console.log(a)}})}function f(b){a.ajax({type:"POST",data:{page:"archivos",block:b.instanceid},url:"../managers/checkrole.php",success:function(b){var c=b.error;if(c){b.msg;swal({allowEscapeKey:!1,title:"AREA RESTRINGIDA",html:!0,type:"error",text:c,confirmButtonColor:"#d51b23"},function(a){a?window.history.back():swal("Cancelled","Your imaginary file is safe :)","error")})}else for(x in b){var d=(b[x].funid,b[x].permiso);switch(d){case"C":break;case"R":break;case"U":a("#archivo").prop("disabled",!1),a("#boton_subir").prop("disabled",!1);break;case"D":a("#archivos_subidos").removeClass("hide");break;default:alert("el permiso es "+d)}}},dataType:"json",cache:"false",error:function(a){alert("Error "+a)}})}function g(b){a.ajax({type:"POST",data:{page:"gestion_roles",block:b.instanceid},url:"../managers/checkrole.php",success:function(b){var c=b.error;if(c){b.msg;swal({allowEscapeKey:!1,title:"ÁREA RESTRINGIDA",html:!0,type:"warning",text:"Esta sección está restringida solo para el personal del Área de Sistemas del Plan Talentos Pilos",confirmButtonColor:"#d51b23"},function(a){a&&window.history.back()})}else for(x in b){var d=(b[x].funid,b[x].permiso);switch(d){case"C":break;case"R":break;case"U":a("#search_button").prop("disabled",!1);break;case"D":}}},dataType:"json",cache:"false",error:function(a){alert("Error "+a)}})}function h(b,c){switch(b){case"R":a("#1a").removeClass("hide");break;case"U":a("#editar_ficha").removeClass("hide"),c.talento_id||a("#editar_ficha").addClass("hide")}}function i(b){switch(b){case"C":break;case"R":a("#2a").removeClass("hide");break;case"U":break;case"D":}}function j(b){switch(b){case"C":break;case"R":a("#3a").removeClass("hide");break;case"U":break;case"D":}}function k(b){switch(b){case"C":break;case"R":a("#4a").removeClass("hide"),a("#panelPares").removeClass("hide"),a("#panelGrupal").removeClass("hide"),a("#panelAcompSocio").removeClass("hide"),a("#panelSegSocio").removeClass("hide"),a("#panelPrimerAcerca").removeClass("hide");break;case"U":break;case"D":}}function l(b){switch(b){case"C":a("#5a").removeClass("hide");break;case"R":a("#5a").removeClass("hide")}}function m(b,c){var d=a("#ficha_estudiante #idtalentos").val();n(d,c,function(c){if(c.result)switch(b){case"C":break;case"R":a("#4a").removeClass("hide"),a("#panelPares").removeClass("hide"),a("#panelGrupal").removeClass("hide");break;case"U":break;case"D":}else swal({title:"ÁREA RESTRINGIDA",html:!0,type:"warning",text:"No tienes permisos para ver la información de este estudiante.<br> Dirigete a la oficina de Sistemas del plan talentos pilos para gestionar tu situación",confirmButtonColor:"#d51b23"},function(a){a&&window.history.back()})})}function n(b,c,d){var e=location.href,f=new Array;b&&(f.push({name:"estudiante_monitor",value:b}),f.push({name:"idinstancia",value:c.instanceid}),a.ajax({type:"POST",data:f,url:"../managers/checkrole.php",success:function(a){a.pagina=e,d(a)},dataType:"json",cache:"false",error:function(a){console.log("Error "),console.log(a)}}))}function o(b){a.ajax({type:"POST",data:{page:"gest_monit_pract",block:b.instanceid},url:"../managers/checkrole.php",success:function(b){var c=b.error;if(c){b.msg;swal({allowEscapeKey:!1,title:"ÁREA RESTRINGIDA",html:!0,type:"warning",text:"Esta sección está restringida solo para el personal del Área de Psicosocial.",confirmButtonColor:"#d51b23"},function(a){a&&window.history.back()})}else for(x in b){var d=(b[x].funid,b[x].permiso);switch(d){case"C":break;case"R":break;case"U":a("#search_button").prop("disabled",!1);break;case"D":}}},dataType:"json",cache:"false",error:function(a){alert("Error "+a)}})}b();a(document).ready(function(){p()});var p=function(h){var i={url:document.location},h=a.extend(i,h),j=h.url,k=b(j.search),l=j.pathname;l.includes("talentos_profile.php")?c(k):l.includes("index.php")?d(k):l.includes("user_management.php")?g(k):l.includes("upload_files_form.php")?f(k):l.includes("psicosocial_users")?o(k):l.includes("seguimiento_pilos")&&e(k)}});